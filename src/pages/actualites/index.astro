---
import Layout from '../../layouts/Layout.astro';
import ActualiteCard from '../../components/ActualiteCard.astro';
import { getCollection } from 'astro:content';

const actualites = (await getCollection('actualites'))
  .filter(a => a.data.publie)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<Layout
  titre="Actualités"
  description="Suivez toutes les actualités de l'ACSM Chavagnes : événements, résultats de compétitions, informations pratiques."
>
  <section class="section">
    <div class="container">
      <div class="actualites-header">
        <h1>Actualités</h1>
        <p>Restez informé de toutes les nouveautés du club</p>
      </div>

      {actualites.length > 0 ? (
        <div class="grid grid-3">
          {actualites.map((actualite) => (
            <ActualiteCard
              titre={actualite.data.titre}
              date={actualite.data.date}
              description={actualite.data.description}
              image={actualite.data.image}
              slug={actualite.slug}
            />
          ))}
        </div>
      ) : (
        <div class="no-actualites card">
          <p>Aucune actualité pour le moment. Revenez bientôt !</p>
        </div>
      )}
    </div>
  </section>
</Layout>

<style>
  .actualites-header {
    text-align: center;
    margin-bottom: var(--spacing-2xl);
  }

  .actualites-header h1 {
    font-size: clamp(2.5rem, 5vw, 3.5rem);
    background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: var(--spacing-md);
  }

  .actualites-header p {
    font-size: 1.25rem;
    color: var(--color-text-secondary);
  }

  .no-actualites {
    text-align: center;
    padding: var(--spacing-2xl);
  }

  .no-actualites p {
    color: var(--color-text-secondary);
    font-size: 1.1rem;
    margin: 0;
  }
</style>
